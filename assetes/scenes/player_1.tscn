[gd_scene load_steps=30 format=3 uid="uid://7lehprto5ubp"]

[ext_resource type="Script" path="res://assetes/scripts/Player_movement.gd" id="1_gxxm2"]
[ext_resource type="Texture2D" uid="uid://t4sgxnc34kps" path="res://assetes/images/particle.png" id="3_0snlk"]
[ext_resource type="Texture2D" uid="uid://d1jj5hlb1lev1" path="res://assetes/images/slimmy.png" id="4_bhlpe"]
[ext_resource type="Texture2D" uid="uid://c256nw77bva4a" path="res://assetes/images/particle2.png" id="4_rvro8"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gtv1c"]
size = Vector2(10.5, 12)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7em2y"]
size = Vector2(16, 4)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_oy56i"]
radius = 8.0
height = 20.0

[sub_resource type="Animation" id="Animation_lgdic"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Playersprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [4]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Playersprite:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_jb6se"]
resource_name = "damage"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Playersprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [10, 11, 12]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Playersprite:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0.364706), Color(1, 1, 1, 1), Color(1, 1, 1, 0.454902), Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_nmb5i"]
resource_name = "fall"
length = 0.2
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Playersprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [6, 7]
}

[sub_resource type="Animation" id="Animation_43rgp"]
resource_name = "idle"
length = 1.4
loop_mode = 1
step = 0.01
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Playersprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.0398695, 0.160131, 0.320261, 0.466152),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3]
}

[sub_resource type="Animation" id="Animation_iypao"]
resource_name = "jump"
length = 0.2
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Playersprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [4, 5]
}

[sub_resource type="Animation" id="Animation_r0jrc"]
resource_name = "puched"
length = 0.5
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Playersprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [13, 14]
}

[sub_resource type="Animation" id="Animation_5amla"]
resource_name = "run"
length = 0.3
loop_mode = 1
step = 0.01
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Playersprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.01, 0.05, 0.09, 0.13),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [1, 8, 3, 9]
}

[sub_resource type="Animation" id="Animation_r6ket"]
resource_name = "spring"

[sub_resource type="Animation" id="Animation_cfuoy"]
resource_name = "stomped on"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Playersprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.3),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [10, 11, 12]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_cyvqi"]
_data = {
"RESET": SubResource("Animation_lgdic"),
"damage": SubResource("Animation_jb6se"),
"fall": SubResource("Animation_nmb5i"),
"idle": SubResource("Animation_43rgp"),
"jump": SubResource("Animation_iypao"),
"puched": SubResource("Animation_r0jrc"),
"run": SubResource("Animation_5amla"),
"spring": SubResource("Animation_r6ket"),
"stomped on": SubResource("Animation_cfuoy")
}

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_8wt7n"]
particle_flag_align_y = true
particle_flag_rotate_y = true
particle_flag_disable_z = true
direction = Vector3(1, 1, 1)
spread = 76.5
gravity = Vector3(5, 500, -5)
initial_velocity_min = -100.0
initial_velocity_max = 150.0
angular_velocity_min = -396.0
angular_velocity_max = 252.0
orbit_velocity_min = 0.0
orbit_velocity_max = 0.0
linear_accel_min = -90.0
linear_accel_max = 13.4
damping_min = 15.0
damping_max = 15.0
scale_min = 0.0
scale_max = 0.5

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_dhpkk"]
lifetime_randomness = 0.3
emission_shape = 3
emission_box_extents = Vector3(1, 1, 1)
particle_flag_disable_z = true
spread = 9.0
gravity = Vector3(-9.8, -20, 0)
initial_velocity_min = -50.0
angular_velocity_min = -50.0
angular_velocity_max = 50.0
orbit_velocity_min = 0.0
orbit_velocity_max = 0.0
scale_min = 0.0
turbulence_enabled = true
collision_use_scale = true

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_iggkt"]
emission_shape = 6
emission_ring_axis = Vector3(0, 0, 1)
emission_ring_height = 1.0
emission_ring_radius = 16.0
emission_ring_inner_radius = 1.0
particle_flag_rotate_y = true
particle_flag_disable_z = true
spread = 180.0
flatness = 1.0
gravity = Vector3(0, 100, 0)
initial_velocity_max = 20.0
orbit_velocity_min = 0.0
orbit_velocity_max = 0.0
scale_min = 0.0
scale_max = 0.7
turbulence_enabled = true
turbulence_noise_speed_random = 2.2
anim_speed_min = 5.0
anim_speed_max = 9.0

[sub_resource type="Curve" id="Curve_7wafn"]
max_value = 1024.0
_data = [Vector2(0.0602837, 1024), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_rshm7"]
curve = SubResource("Curve_7wafn")

[sub_resource type="Gradient" id="Gradient_tkkg8"]
colors = PackedColorArray(0.952941, 0, 0.0862745, 1, 1, 1, 0, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_m1p4y"]
gradient = SubResource("Gradient_tkkg8")
use_hdr = true

[sub_resource type="Curve" id="Curve_05jmh"]
min_value = -500.0
max_value = 500.0
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.5, 500), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_3y8ba"]
curve = SubResource("Curve_05jmh")

[sub_resource type="Curve" id="Curve_lsb2v"]
_data = [Vector2(0, 0.47331), 0.0, 0.0, 0, 0, Vector2(0.315603, 0.829181), 0.0, 0.0, 0, 0, Vector2(0.478723, 0.601423), 0.0, 0.0, 0, 0, Vector2(0.925532, 0.0604982), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="CurveTexture" id="CurveTexture_nj80m"]
curve = SubResource("Curve_lsb2v")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_yuf7i"]
lifetime_randomness = 1.0
emission_shape = 1
emission_sphere_radius = 10.0
particle_flag_align_y = true
particle_flag_rotate_y = true
particle_flag_disable_z = true
flatness = 1.0
gravity = Vector3(10, 10, 10)
initial_velocity_min = -100.0
initial_velocity_max = 100.0
angular_velocity_min = 30.0
angular_velocity_max = 30.0
orbit_velocity_min = 0.0
orbit_velocity_max = 0.0
orbit_velocity_curve = SubResource("CurveTexture_3y8ba")
scale_min = 0.5
scale_max = 2.0
scale_curve = SubResource("CurveTexture_nj80m")
color_ramp = SubResource("GradientTexture1D_m1p4y")
anim_speed_max = 4.95
anim_speed_curve = SubResource("CurveTexture_rshm7")
sub_emitter_mode = 1
sub_emitter_frequency = 0.01
collision_use_scale = true

[node name="Player" type="CharacterBody2D" groups=["Player"]]
script = ExtResource("1_gxxm2")
friction = 50.0
air_friction = 0.0

[node name="LEFT" type="Area2D" parent="."]

[node name="colition" type="CollisionShape2D" parent="LEFT"]
position = Vector2(-7.75, 0)
shape = SubResource("RectangleShape2D_gtv1c")
debug_color = Color(0, 0.6, 0.701961, 0.419608)

[node name="RIGHT" type="Area2D" parent="."]

[node name="colition" type="CollisionShape2D" parent="RIGHT"]
position = Vector2(5, 0)
shape = SubResource("RectangleShape2D_gtv1c")

[node name="DOWN" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="DOWN"]
position = Vector2(-1, 7)
shape = SubResource("RectangleShape2D_7em2y")

[node name="UP" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="UP"]
position = Vector2(-1, -8)
shape = SubResource("RectangleShape2D_7em2y")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-1, -1)
rotation = 1.5708
shape = SubResource("CapsuleShape2D_oy56i")

[node name="Playersprite" type="Sprite2D" parent="."]
texture = ExtResource("4_bhlpe")
hframes = 15
frame = 4

[node name="animator" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_cyvqi")
}

[node name="Boom" type="GPUParticles2D" parent="."]
position = Vector2(0, 3)
emitting = false
amount = 100
process_material = SubResource("ParticleProcessMaterial_8wt7n")
texture = ExtResource("3_0snlk")
randomness = 1.0

[node name="run" type="GPUParticles2D" parent="."]
position = Vector2(-3, 6)
amount = 14
process_material = SubResource("ParticleProcessMaterial_dhpkk")
texture = ExtResource("3_0snlk")

[node name="jump" type="GPUParticles2D" parent="."]
emitting = false
amount = 10
process_material = SubResource("ParticleProcessMaterial_iggkt")
texture = ExtResource("4_rvro8")
fract_delta = false

[node name="Life" type="Label" parent="."]
offset_left = -10.0
offset_top = -29.0
offset_right = 8.0
offset_bottom = -3.0
size_flags_horizontal = 8
size_flags_vertical = 6
text = "x5
"

[node name="CoyoteJump" type="Timer" parent="."]
wait_time = 0.2
one_shot = true

[node name="Death" type="Timer" parent="."]

[node name="Dammage" type="GPUParticles2D" parent="."]
position = Vector2(-6, 0)
emitting = false
amount = 100
sub_emitter = NodePath(".")
process_material = SubResource("ParticleProcessMaterial_yuf7i")
texture = ExtResource("3_0snlk")
collision_base_size = 16.42

[connection signal="body_entered" from="LEFT" to="." method="collide_left"]
[connection signal="body_exited" from="LEFT" to="." method="_on_left_body_exited"]
[connection signal="body_entered" from="RIGHT" to="." method="collide_right"]
[connection signal="body_entered" from="RIGHT" to="." method="_on_right_body_entered"]
[connection signal="body_exited" from="RIGHT" to="." method="_on_right_body_exited"]
[connection signal="body_entered" from="DOWN" to="." method="bump"]
[connection signal="body_entered" from="UP" to="." method="stomp"]
[connection signal="body_exited" from="UP" to="." method="_on_right_body_exited"]
